<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			.box1 {
				width: 100px;
				height: 100px;
				background-color: #9ACD32;
				position: absolute;
				left: 0;
				top: 40px;
			}

			.box2 {
				position: absolute;
				left: 0;
				top: 200px;
				width: 200px;
				height: 200px;
				background-color: #B22222;
			}
		</style>
	</head>
	<body>
		<div class="box1">

		</div>
		<!-- <div class="box2">

		</div> -->
		<button type="button" class="btn0">开始位置</button>
		<button type="button" class="btn300">300</button>
		<button type="button" class="btn500">500</button>
		<script>
			var box1 = document.querySelector('.box1');
			// var box2 = document.querySelector('.box2');

			var btn300 = document.querySelector('.btn300')
			var btn500 = document.querySelector('.btn500')
			var btn0 = document.querySelector('.btn0')

			function animate(obj, target, callback) {
				clearInterval(obj.timer);
				obj.timer = setInterval(function() {
					// 步长写到定时器里
					var step = (target - obj.offsetLeft) / 10;
					// 当步长大于0时向上取整，小于0时向下取整。避免移动位置不准的问题
					step = step > 0 ? Math.ceil(step) : Math.floor(step);
					console.log(step);
					if (obj.offsetLeft === target) {
						clearInterval(obj.timer);
						callback && callback();
					}
					// 缓动动画，步长公式（目标值-现在的位置）/10
					obj.style.left = obj.offsetLeft + step + "px";
				}, 15)
			}

			btn0.addEventListener('click', function() {
				animate(box1, 0, () => {
					box1.style.backgroundColor = "#9AC";
				});
			})
			btn300.addEventListener('click', function() {
				animate(box1, 300, () => {
					box1.style.backgroundColor = "#B22222";
				});
			})
			btn500.addEventListener('click', function() {
				animate(box1, 500, () => {
					box1.style.backgroundColor = "red";
				});
			})
		</script>
	</body>
</html>
